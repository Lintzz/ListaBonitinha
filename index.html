<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minha Lista Geek Compartilhada</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Lista bonitinha</h1>
        <button class="btn-main-action" onclick="openWheelModal()">
          SORTEAR
        </button>
      </header>

      <div class="lists-grid">
        <div class="list-card">
          <div class="list-header">
            <p></p>
            <h2>Estamos Assistindo</h2>
            <button class="btn-add-item" onclick="openAddModal('watching')">
              +
            </button>
          </div>

          <div class="filter-chips">
            <button
              class="chip active"
              onclick="setFilter('watching', 'all', this)"
            >
              Todos
            </button>
            <button class="chip" onclick="setFilter('watching', 'anime', this)">
              Animes
            </button>
            <button class="chip" onclick="setFilter('watching', 'serie', this)">
              S√©ries
            </button>
            <button class="chip" onclick="setFilter('watching', 'filme', this)">
              Filmes
            </button>
          </div>

          <ul id="list-watching"></ul>
        </div>

        <div class="list-card">
          <div class="list-header">
            <p></p>
            <h2>Queremos Assistir</h2>
            <button class="btn-add-item" onclick="openAddModal('towatch')">
              +
            </button>
          </div>

          <div class="filter-chips">
            <button
              class="chip active"
              onclick="setFilter('towatch', 'all', this)"
            >
              Todos
            </button>
            <button class="chip" onclick="setFilter('towatch', 'anime', this)">
              Animes
            </button>
            <button class="chip" onclick="setFilter('towatch', 'serie', this)">
              S√©ries
            </button>
            <button class="chip" onclick="setFilter('towatch', 'filme', this)">
              Filmes
            </button>
          </div>

          <ul id="list-towatch"></ul>
        </div>
      </div>
    </div>

    <div id="modal-add" class="modal-overlay">
      <div class="modal-box">
        <h3 id="modal-add-title">Adicionar Novo</h3>

        <div class="autocomplete-wrapper">
          <input
            type="text"
            id="new-item-name"
            placeholder="Digite o nome (ex: Shrek)..."
            autocomplete="off"
          />
          <ul id="suggestions-list" class="suggestions-box"></ul>
        </div>

        <label>Tipo:</label>
        <select id="new-item-type">
          <option value="anime">Anime</option>
          <option value="serie">S√©rie</option>
          <option value="filme">Filme</option>
        </select>

        <div class="modal-actions">
          <button class="btn-cancel" onclick="closeModals()">Cancelar</button>
          <button class="btn-confirm" onclick="confirmAddItem()">
            Salvar
          </button>
        </div>
      </div>
    </div>

    <div id="modal-wheel" class="modal-overlay">
      <div class="modal-box wheel-box">
        <div class="wheel-header">
          <h3>Configurar Sorteio</h3>
          <button class="btn-close-x" onclick="closeModals()">&times;</button>
        </div>

        <div class="filters">
          <select id="spin-source" onchange="updateWheel()">
            <option value="towatch">Quero Assistir</option>
            <option value="watching">Assistindo</option>
          </select>

          <select id="spin-filter" onchange="updateWheel()">
            <option value="all">Qualquer Tipo</option>
            <option value="anime">S√≥ Animes</option>
            <option value="serie">S√≥ S√©ries</option>
            <option value="filme">S√≥ Filmes</option>
          </select>
        </div>

        <div class="wheel-wrapper">
          <div class="pointer">‚ñº</div>
          <canvas id="wheelCanvas" width="350" height="350"></canvas>
        </div>

        <button id="btn-spin" onclick="spinWheel()">GIRAR!</button>
      </div>
    </div>

    <div id="modal-result" class="modal-overlay" style="z-index: 200">
      <div class="modal-box result-box">
        <h3>Vamos assistir:</h3>
        <h1 id="winner-name">...</h1>
        <div id="winner-tag" class="badge">TYPE</div>
        <button class="btn-confirm" onclick="closeModals()">Legal!</button>
      </div>
    </div>

    <div id="modal-confirm" class="modal-overlay" style="z-index: 300">
      <div class="modal-box">
        <h3>Tem certeza? üóëÔ∏è</h3>
        <p>
          Voc√™ quer mesmo apagar este item? Essa a√ß√£o n√£o pode ser desfeita.
        </p>

        <div class="modal-actions">
          <button class="btn-cancel" onclick="closeModals()">Cancelar</button>
          <button class="btn-danger" onclick="executeDelete()">
            Sim, Apagar
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
